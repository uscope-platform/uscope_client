import{u as n,d as y,c as i,r as R,j as r,U as l,S as o,I as d,e as E,R as S,g as P}from"./index-a234ec4f.js";import{S as b}from"./ManagerToolbar-f6f5af79.js";let A=k=>{const s=n(e=>new y(e.peripherals[e.settings.current_peripheral])),p=i.WidthProvider(i.Responsive),c=n(e=>e.settings),[,u]=R.useReducer(e=>e+1,0);let m=e=>{e.key==="Enter"&&s.set_version(e.target.value).then()},x=e=>{e.key==="Enter"&&s.edit_name(e.target.value).then()},g=(e,h,_)=>{let t=Object.values(h).map(f=>{const v=new RegExp("new_"+e+"_(\\d+)","g");let a=Array.from(f[_].matchAll(v),w=>w[1]);return a.length>0?a:null});t=t.filter(Boolean);let j="new_"+e+"_"+P(t.sort());s.add_register(j).then()};return c.current_peripheral?r.jsxs(p,{className:"layout",breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:24,md:20,sm:12,xs:8,xxs:4},useCSSTransforms:!1,children:[r.jsx(l,{"data-grid":{x:0,y:0,w:24,h:1,static:!0},level:"level_2",children:r.jsx(o,{name:"Peripheral Properties",content:r.jsxs("div",{children:[r.jsx(d,{inline:!0,name:"edit_name",defaultValue:s.peripheral_name,onKeyDown:x,label:"Name"}),r.jsx(d,{inline:!0,name:"edit_version",defaultValue:s.version,onKeyDown:m,label:"Version"})]})})},"properties"),r.jsx(l,{"data-grid":{x:0,y:1,w:24,h:5,static:!0},level:"level_2",children:r.jsx(o,{name:"Registers",content:r.jsxs("div",{children:[r.jsx(b,{onAdd:()=>{g("register",s.registers,"register_name")},contentName:"Register"}),r.jsx(E,{children:s.registers.map(e=>r.jsx(S,{peripheral:s,forceUpdate:u,register:e}))})]})})},"registers")]}):r.jsx(r.Fragment,{})};export{A as default};
